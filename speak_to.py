from pynput import keyboard
import os

def on_press(key):
    try:
        if key.char == 's':
            # Start listening for the next characters
            listener = keyboard.Listener(on_press=on_speak_to)
            listener.start()
        else:
            # Reset the listener
            listener.stop()
    except AttributeError:
        pass

def on_speak_to(key):
    try:
        if key.char == 'p':
            # Continue listening for the next characters
            pass
        elif key.char == 'e':
            # Continue listening for the next characters
            pass
        elif key.char == 'a':
            # Continue listening for the next characters
            pass
        elif key.char == 'k':
            # Convert "speak_to" to "Ctrl+K"
            os.system("xdotool key 'Ctrl+K'")
            # Stop listening for the next characters
            listener.stop()
        else:
            # Reset the listener
            listener.stop()
    except AttributeError:
        pass

# Start listening for the "s" key
listener = keyboard.Listener(on_press=on_press)
listener.start()
